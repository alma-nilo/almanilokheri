"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6936],{8572:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var n=s(2791),a=s(2506),o=s(8007),l=s(6934),i=s(9891);const r=(0,l.ZP)(i.Z)((e=>{let{theme:t}=e;return{padding:8,"& .MuiSwitch-track":{borderRadius:11,"&:before, &:after":{content:'""',position:"absolute",top:"50%",transform:"translateY(-50%)",width:16,height:16},"&:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="'.concat(encodeURIComponent(t.palette.getContrastText(t.palette.primary.main)),'" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg>\')'),left:12},"&:after":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 24 24"><path fill="'.concat(encodeURIComponent(t.palette.getContrastText(t.palette.primary.main)),'" d="M19,13H5V11H19V13Z" /></svg>\')'),right:12}},"& .MuiSwitch-thumb":{boxShadow:"none",width:16,height:16,margin:2}}}));var c=s(5294),d=s(4264),m=s(6307),u=s(184);const h=o.Ry().shape({title:o.Z_().required("Title is required"),date:o.hT().required("Date is required"),newsText:o.Z_().required("News text is required")}),x=e=>{let{fetchNews:t}=e;const[s,o]=(0,n.useState)(!0),{setAlert:l}=(0,d.wS)(),{admin:i}=(0,m.z)();return(0,u.jsx)(a.J9,{initialValues:{title:"",date:"",newsText:""},validationSchema:h,onSubmit:async(e,n)=>{let{resetForm:a}=n;const{title:o,date:r,newsText:d}=e,m="".concat("http://localhost:5000","/admins/news"),u={title:o,newFlag:s,date:r,description:d},h={headers:{Authorization:"Bearer ".concat(i.token)}};try{await c.Z.post(m,u,h),l({type:"success",message:"success"}),t(),a()}catch(x){l({type:"error",message:"Somthing went wrong"})}},children:e=>{let{errors:t,touched:n,isSubmitting:l}=e;return(0,u.jsxs)(a.l0,{className:"mt-4",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"News Title:"}),(0,u.jsx)(a.gN,{type:"text",name:"title",id:"title",className:"appearance-none  rounded w-full py-2 px-3 text-white-900 font-bold bg-purple-600 leading-tight focus:outline-none focus:shadow-outline ".concat(t.title&&n.title?" border border-red-500":""),placeholder:"Enter news title"}),(0,u.jsx)(a.Bc,{name:"title",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"date",children:"Date:"}),(0,u.jsx)(a.gN,{type:"date",name:"date",id:"date",className:"appearance-none  rounded w-full py-2 px-3 text-white-900 font-bold leading-tight  bg-purple-600 focus:outline-none focus:shadow-outline ".concat(t.date&&n.date?"border border-red-500":""),placeholder:"Select news date"}),(0,u.jsx)(a.Bc,{name:"date",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"newsText",children:"News Text:"}),(0,u.jsx)(a.gN,{as:"textarea",name:"newsText",id:"newsText",rows:"4",className:"appearance-none  rounded w-full py-2 px-3 text-white-900 font-bold leading-tight bg-purple-600 focus:outline-none focus:shadow-outline ".concat(t.newsText&&n.newsText?"border border-red-500":""),placeholder:"Enter news text"}),(0,u.jsx)(a.Bc,{name:"newsText",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"toggle",children:"NEW : toggle"}),(0,u.jsx)(r,{checked:s,onChange:()=>o(!s),color:"success"}),(0,u.jsx)(a.Bc,{name:"toggle",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,u.jsx)("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",disabled:l,children:l?"Plz wait ......":" Submit News"})]})}})},p=e=>{let{newsList:t,setNewsList:s,fetchNews:l}=e;const[i,h]=(0,n.useState)(!1),[x,p]=(0,n.useState)(null),[b,g]=(0,n.useState)(!1),[w,f]=(0,n.useState)(null),[N,j]=(0,n.useState)(null),[v,y]=(0,n.useState)(!1),{admin:k}=(0,m.z)(),{setAlert:S}=(0,d.wS)(),C=()=>{g(!1),f(null),y(!1)},T=o.Ry().shape({description:o.Z_().required("Description is required")});return(0,u.jsxs)("div",{className:"min-h-screen  ",children:[(0,u.jsx)("style",{children:"\n  @keyframes blink {\n    0% {\n      background-color: #ff0000;\n      transform: scale(1);\n    }\n    25% {\n      background-color: #0bff89;\n      transform: scale(1.2);\n    }\n    50% {\n      background-color: #2cff0b;\n      transform: scale(1);\n    }\n    75% {\n      background-color: #0b30ff;\n      transform: scale(1.2);\n    }\n    100% {\n      background-color: #ff00e6;\n      transform: scale(1);\n    }\n  }\n  \n  .blinking-tag {\n    animation: blink 1s infinite;\n    position: absolute;\n    top: 25px;\n    right: 20px;\n    padding: 0px 5px;\n    color: white;\n    font-weight: bold;\n    border-radius: 4px;\n  }\n"}),(0,u.jsxs)("div",{className:"container mx-auto p-8",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"News View"}),null===t||void 0===t?void 0:t.map((e=>(0,u.jsxs)("div",{className:" border rounded-lg p-6 mb-4 shadow-md hover:shadow-lg transition duration-300 ".concat(e.newFlag?"relative":""),children:[e.newFlag&&(0,u.jsx)("span",{className:"blinking-tag",children:"New"}),(0,u.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.title}),(0,u.jsx)("p",{className:"text-purple-300 mb-2",children:e.date}),(0,u.jsx)("p",{className:"text-sm mb-4",children:e.description}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("div",{children:(0,u.jsx)("button",{onClick:()=>(e=>{f(e),j(e.newFlag),g(!0),y(!1)})(e),className:"text-green-500 font-bold py-2 px-4 rounded mr-2 hover:bg-green-500 hover:text-white focus:outline-none focus:shadow-outline",children:"Edit"})}),(0,u.jsx)("button",{onClick:()=>{return t=e._id,s=e.title,h(!0),void p({id:t,title:s});var t,s},className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Delete"})]})]},e._id)))]}),x&&(0,u.jsx)("div",{className:"fixed inset-0 flex items-center justify-center ".concat(i?"visible":"hidden"),style:{backdropFilter:i?"blur(8px)":"none",zIndex:i?999:-1},children:(0,u.jsxs)("div",{className:"bg-white rounded-lg p-6 text-center",children:[(0,u.jsx)("p",{className:"text-lg text-black font-semibold mb-4",children:"Are you sure you want to delete this News?"}),(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsx)("p",{className:"text-gray-600 mt-2",children:x.title})}),(0,u.jsxs)("div",{className:"flex justify-center",children:[(0,u.jsx)("button",{onClick:()=>{(async()=>{const e="".concat("http://localhost:5000","/admins/news/delete"),t={id:x.id},s={headers:{Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.token)}};try{await c.Z.post(e,t,s),S({type:"success",message:"News Deleted successful"}),h(!1),p(null),l()}catch(n){S({type:"error",message:"Somthing went wrong"})}})()},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md mr-2",children:"Delete"}),(0,u.jsx)("button",{onClick:()=>{h(!1),p(null)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md",children:"Cancel"})]})]})}),w&&(0,u.jsx)("div",{className:"fixed inset-0 flex items-center justify-center ".concat(b?"visible":"hidden"),style:{backdropFilter:b?"blur(8px)":"none",zIndex:b?999:-1},children:(0,u.jsxs)("div",{className:"bg-white border border-black rounded-lg p-8",children:[(0,u.jsx)("h2",{className:"text-xl font-bold mb-4 text-purple-700",children:"Edit News"}),(0,u.jsx)(a.J9,{initialValues:{description:w.description},validationSchema:T,onSubmit:async e=>{if(e.description===w.description&&N===w.newFlag)return void S({type:"warning",message:"News can't be as previous"});y(!0);const t="".concat("http://localhost:5000","/admins/news/edit"),s={id:w._id,newflag:N,description:e.description},n={headers:{Authorization:"Bearer ".concat(null===k||void 0===k?void 0:k.token)}};try{await c.Z.post(t,s,n),S({type:"success",message:"News Updated successful"}),g(!1),f(null),y(!1),l()}catch(a){S({type:"error",message:"Somthing went wrong"})}},children:e=>{let{errors:t,touched:s,isSubmitting:n}=e;return(0,u.jsxs)(a.l0,{children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Description"}),(0,u.jsx)(a.gN,{name:"description",className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(t.description&&s.description?"border-red-500":""),component:"textarea",rows:"3",placeholder:"Enter news description"}),t.description&&s.description&&(0,u.jsx)("p",{className:"text-red-500 text-xs italic",children:t.description})]}),w.newFlag?(0,u.jsx)("div",{className:"mb-4",children:(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)(r,{checked:N,onChange:()=>j(!N),color:"success"}),(0,u.jsx)("span",{className:"ml-2 text-gray-700 font-bold",children:"Mark as new"})]})}):"",(0,u.jsxs)("div",{className:"flex justify-end",children:[(0,u.jsx)("button",{type:"button",onClick:C,className:"text-gray-500 font-bold py-2 px-4 rounded mr-2 hover:bg-gray-200 focus:outline-none focus:shadow-outline",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:v,className:"bg-purple-800 hover:bg-purple-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:v?"Plz wait .....":"Update"})]})]})}})]})})]})},b=()=>{const[e,t]=(0,n.useState)([]),{admin:s}=(0,m.z)(),a=async()=>{const e="".concat("http://localhost:5000","/admins/news"),n={headers:{Authorization:"Bearer ".concat(null===s||void 0===s?void 0:s.token)}};try{const s=await c.Z.get(e,n);t(s.data.data)}catch(a){}};return(0,n.useEffect)((()=>{a()}),[s]),(0,u.jsxs)("div",{className:"min-h-screen  ",children:[(0,u.jsxs)("div",{className:"container mx-auto p-8",children:[(0,u.jsx)("h1",{className:" text-3xl text-gray-400 font-bold mb-4",children:"News Upload"}),(0,u.jsx)(x,{fetchNews:a})]}),(0,u.jsx)(p,{newsList:e,setNewsList:t,fetchNews:a})]})}},3840:(e,t,s)=>{s.d(t,{Z:()=>n});const n=s(2791).createContext(void 0)},2930:(e,t,s)=>{s.d(t,{Z:()=>o});var n=s(2791),a=s(3840);function o(){return n.useContext(a.Z)}}}]);
//# sourceMappingURL=6936.847fc73e.chunk.js.map