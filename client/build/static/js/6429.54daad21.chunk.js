"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6429],{6429:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s(2791),i=s(2506),a=s(8007),l=s(5294),o=s(4264),r=s(6307),d=s(184);const c=a.Ry().shape({title:a.Z_().required("Title is required"),date:a.hT().required("Date is required"),eventText:a.Z_().required("Event text is required")}),u=e=>{let{fetchEvent:t}=e;const{setAlert:s}=(0,o.wS)(),{admin:n}=(0,r.z)();return(0,d.jsx)(i.J9,{initialValues:{title:"",date:"",eventText:""},validationSchema:c,onSubmit:async(e,i)=>{let{resetForm:a}=i;const{title:o,date:r,eventText:d}=e,c="".concat("http://localhost:5000","/admins/event"),u={title:o,date:r,description:d},x={headers:{Authorization:"Bearer ".concat(n.token)}};try{await l.Z.post(c,u,x),s({type:"success",message:"success"}),t(),a()}catch(h){s({type:"error",message:"Somthing went wrong"})}},children:e=>{let{errors:t,touched:s,isSubmitting:n}=e;return(0,d.jsxs)(i.l0,{className:"mt-4",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"Event Title:"}),(0,d.jsx)(i.gN,{type:"text",name:"title",id:"title",className:"appearance-none  rounded w-full py-2 px-3 text-white-900 font-bold bg-purple-600 leading-tight focus:outline-none focus:shadow-outline ".concat(t.title&&s.title?" border border-red-500":""),placeholder:"Enter Event title"}),(0,d.jsx)(i.Bc,{name:"title",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"date",children:"Date:"}),(0,d.jsx)(i.gN,{type:"date",name:"date",id:"date",className:"appearance-none  rounded w-full py-2 px-3 text-white-900 font-bold leading-tight  bg-purple-600 focus:outline-none focus:shadow-outline ".concat(t.date&&s.date?"border border-red-500":""),placeholder:"Select news date"}),(0,d.jsx)(i.Bc,{name:"date",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"eventText",children:"News Text:"}),(0,d.jsx)(i.gN,{as:"textarea",name:"eventText",id:"eventText",rows:"4",className:"appearance-none  rounded w-full py-2 px-3 text-white-900 font-bold leading-tight bg-purple-600 focus:outline-none focus:shadow-outline ".concat(t.eventText&&s.eventText?"border border-red-500":""),placeholder:"Enter Event text"}),(0,d.jsx)(i.Bc,{name:"eventText",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,d.jsx)("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",disabled:n,children:n?"Plz wait ......":" Submit Event"})]})}})},x=e=>{let{eventList:t,fetchEvent:s}=e;const[c,u]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),[g,f]=(0,n.useState)(!1),{admin:j}=(0,r.z)(),{setAlert:w}=(0,o.wS)(),y=()=>{p(!1),v(null),f(!1)},N=a.Ry().shape({description:a.Z_().required("Description is required")});return(0,d.jsxs)("div",{className:"min-h-screen  ",children:[(0,d.jsxs)("div",{className:"container mx-auto p-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Event View"}),null===t||void 0===t?void 0:t.map((e=>(0,d.jsxs)("div",{className:" border rounded-lg p-6 mb-4 shadow-md hover:shadow-lg transition duration-300",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.title}),(0,d.jsx)("p",{className:"text-purple-300 mb-2",children:e.date}),(0,d.jsx)("p",{className:"text-sm mb-4",children:e.description}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:()=>(e=>{v(e),p(!0),f(!1)})(e),className:"text-green-500 font-bold py-2 px-4 rounded mr-2 hover:bg-green-500 hover:text-white focus:outline-none focus:shadow-outline",children:"Edit"})}),(0,d.jsx)("button",{onClick:()=>{return t=e._id,s=e.title,u(!0),void h({id:t,title:s});var t,s},className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:"Delete"})]})]},e._id)))]}),x&&(0,d.jsx)("div",{className:"fixed inset-0 flex items-center justify-center ".concat(c?"visible":"hidden"),style:{backdropFilter:c?"blur(8px)":"none",zIndex:c?999:-1},children:(0,d.jsxs)("div",{className:"bg-white rounded-lg p-6 text-center",children:[(0,d.jsx)("p",{className:"text-lg text-black font-semibold mb-4",children:"Are you sure you want to delete this Event?"}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)("p",{className:"text-gray-600 mt-2",children:x.title})}),(0,d.jsxs)("div",{className:"flex justify-center",children:[(0,d.jsx)("button",{onClick:()=>{(async()=>{const e="".concat("http://localhost:5000","/admins/event/delete"),t={id:x.id},n={headers:{Authorization:"Bearer ".concat(null===j||void 0===j?void 0:j.token)}};try{await l.Z.post(e,t,n),w({type:"success",message:"News Deleted successful"}),u(!1),h(null),s()}catch(i){w({type:"error",message:"Somthing went wrong"})}})()},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md mr-2",children:"Delete"}),(0,d.jsx)("button",{onClick:()=>{u(!1),h(null)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md",children:"Cancel"})]})]})}),b&&(0,d.jsx)("div",{className:"fixed inset-0 flex items-center justify-center ".concat(m?"visible":"hidden"),style:{backdropFilter:m?"blur(8px)":"none",zIndex:m?999:-1},children:(0,d.jsxs)("div",{className:"bg-white border border-black rounded-lg p-8",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4 text-purple-700",children:"Edit Event"}),(0,d.jsx)(i.J9,{initialValues:{description:b.description},validationSchema:N,onSubmit:async e=>{if(e.description===b.description)return void w({type:"warning",message:"Event can't be as previous"});f(!0);const t="".concat("http://localhost:5000","/admins/event/edit"),n={id:b._id,description:e.description},i={headers:{Authorization:"Bearer ".concat(null===j||void 0===j?void 0:j.token)}};try{await l.Z.post(t,n,i),w({type:"success",message:"News Updated successful"}),p(!1),v(null),f(!1),s()}catch(a){w({type:"error",message:"Somthing went wrong"})}},children:e=>{let{errors:t,touched:s,isSubmitting:n}=e;return(0,d.jsxs)(i.l0,{children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"Description"}),(0,d.jsx)(i.gN,{name:"description",className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(t.description&&s.description?"border-red-500":""),component:"textarea",rows:"3",placeholder:"Enter news description"}),t.description&&s.description&&(0,d.jsx)("p",{className:"text-red-500 text-xs italic",children:t.description})]}),(0,d.jsxs)("div",{className:"flex justify-end",children:[(0,d.jsx)("button",{type:"button",onClick:y,className:"text-gray-500 font-bold py-2 px-4 rounded mr-2 hover:bg-gray-200 focus:outline-none focus:shadow-outline",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:g,className:"bg-purple-800 hover:bg-purple-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",children:g?"Plz wait .....":"Update"})]})]})}})]})})]})},h=()=>{const[e,t]=(0,n.useState)([]),{admin:s}=(0,r.z)(),i=async()=>{const e="".concat("http://localhost:5000","/admins/event"),n={headers:{Authorization:"Bearer ".concat(null===s||void 0===s?void 0:s.token)}};try{const s=await l.Z.get(e,n);t(s.data.data)}catch(i){}};return(0,n.useEffect)((()=>{i()}),[s]),(0,d.jsxs)("div",{className:"min-h-screen  ",children:[(0,d.jsxs)("div",{className:"container mx-auto p-8",children:[(0,d.jsx)("h1",{className:" text-3xl text-gray-400 font-bold mb-4",children:"Events Upload"}),(0,d.jsx)(u,{fetchEvent:i})]}),(0,d.jsx)(x,{eventList:e,fetchEvent:i})]})}}}]);
//# sourceMappingURL=6429.54daad21.chunk.js.map